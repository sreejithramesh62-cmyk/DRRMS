<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DRRMS - Register</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
:root{
  --primary:#d4af37;--primary-light:#f4e5a8;--primary-dark:#b8972f;
  --bg-dark:#0a0e1a;--bg-card:#12172a;--bg-hover:#1a2138;
  --text:#e8f0ff;--text-muted:#8b96a8;--border:#1e2840;
  --success:#10b981;--error:#ef4444;--warning:#f59e0b;--info:#3b82f6;
  --shadow:0 20px 60px rgba(0,0,0,.5);--glow:0 0 30px rgba(212,175,55,.4);
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Inter',system-ui,sans-serif;
  background:#0a0e1a;color:var(--text);
  min-height:100vh;overflow:hidden;
  position:relative;
  display:flex;align-items:center;justify-content:center;
}

/* Animated Background */
.bg-animation{
  position:fixed;inset:0;z-index:0;overflow:hidden;
  background:linear-gradient(135deg, #0a0e1a 0%, #1a1f3a 50%, #0f1628 100%);
}

/* Animated Particles */
.particle{
  position:absolute;
  width:4px;height:4px;
  background:rgba(212,175,55,.6);
  border-radius:50%;
  animation:float linear infinite;
  box-shadow:0 0 10px rgba(212,175,55,.8);
}

@keyframes float{
  0%{transform:translateY(100vh) translateX(0) rotate(0deg);opacity:0}
  10%{opacity:1}
  90%{opacity:1}
  100%{transform:translateY(-100vh) translateX(100px) rotate(360deg);opacity:0}
}

/* Disaster waves animation */
.wave{
  position:absolute;bottom:0;left:0;width:200%;height:100px;
  background:linear-gradient(90deg, transparent, rgba(239,68,68,.1), transparent);
  animation:wave 8s ease-in-out infinite;
}
.wave:nth-child(2){animation-delay:2s;opacity:.5}
.wave:nth-child(3){animation-delay:4s;opacity:.3}

@keyframes wave{
  0%,100%{transform:translateX(0) translateY(0)}
  50%{transform:translateX(-25%) translateY(-10px)}
}

/* Emergency flash effect */
.flash{
  position:absolute;top:0;left:0;width:100%;height:100%;
  background:radial-gradient(circle at center, rgba(239,68,68,.1), transparent 70%);
  animation:flash 3s ease-in-out infinite;
  pointer-events:none;
}

@keyframes flash{
  0%,100%{opacity:0}
  50%{opacity:1}
}

/* Glowing lines */
.glow-line{
  position:absolute;
  height:2px;
  background:linear-gradient(90deg, transparent, rgba(212,175,55,.8), transparent);
  animation:glow-move 4s linear infinite;
}

@keyframes glow-move{
  0%{transform:translateX(-100%)}
  100%{transform:translateX(100vw)}
}

/* Register Container */
.register-container{
  position:relative;z-index:10;
  width:90%;max-width:500px;
  background:rgba(18,23,42,.95);
  border:1px solid var(--border);
  border-radius:24px;
  padding:48px 40px;
  box-shadow:var(--shadow), var(--glow);
  backdrop-filter:blur(20px);
  animation:slideUp 0.8s ease backwards;
}

@keyframes slideUp{
  from{opacity:0;transform:translateY(40px)}
  to{opacity:1;transform:translateY(0)}
}

.logo-section{
  text-align:center;margin-bottom:32px;
}

.logo-icon{
  width:80px;height:80px;margin:0 auto 16px;
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  border-radius:20px;display:grid;place-items:center;
  font-size:40px;font-weight:900;
  box-shadow:var(--glow);
  animation:pulse 2s ease-in-out infinite;
}

@keyframes pulse{
  0%,100%{transform:scale(1);box-shadow:var(--glow)}
  50%{transform:scale(1.05);box-shadow:0 0 40px rgba(212,175,55,.6)}
}

.logo-text{
  font-size:28px;font-weight:800;
  background:linear-gradient(135deg,var(--primary-light),var(--primary));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  margin-bottom:8px;
}

.subtitle{
  color:var(--text-muted);font-size:14px;font-weight:500;
}

.alert-badge{
  display:inline-block;
  padding:4px 12px;
  background:rgba(239,68,68,.15);
  border:1px solid var(--error);
  border-radius:999px;
  color:var(--error);
  font-size:12px;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.5px;
  margin-top:8px;
  animation:blink 2s ease-in-out infinite;
}

@keyframes blink{
  0%,100%{opacity:1}
  50%{opacity:.6}
}

.form-group{
  margin-bottom:20px;
}

.input-wrapper{
  position:relative;
}

.input-icon{
  position:absolute;left:16px;top:50%;transform:translateY(-50%);
  font-size:18px;color:var(--text-muted);
  transition:.3s;
}

input{
  width:100%;padding:14px 14px 14px 48px;
  background:rgba(10,14,26,.8);
  border:1px solid var(--border);
  border-radius:12px;
  color:var(--text);
  font-size:14px;
  font-family:inherit;
  transition:.3s;
}

input:focus{
  outline:none;
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(212,175,55,.2);
  background:rgba(10,14,26,.95);
}

input:focus + .input-icon{
  color:var(--primary);
  transform:translateY(-50%) scale(1.1);
}

input::placeholder{
  color:var(--text-muted);
  opacity:.6;
}

.btn{
  width:100%;padding:16px;
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  border:none;border-radius:12px;
  color:#000;font-size:16px;font-weight:700;
  cursor:pointer;transition:.3s;
  text-transform:uppercase;
  letter-spacing:1px;
  box-shadow:0 8px 20px rgba(212,175,55,.3);
  position:relative;
  overflow:hidden;
}

.btn::before{
  content:'';position:absolute;inset:0;
  background:linear-gradient(135deg, transparent, rgba(255,255,255,.3), transparent);
  transform:translateX(-100%);
  transition:.5s;
}

.btn:hover::before{
  transform:translateX(100%);
}

.btn:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 30px rgba(212,175,55,.5);
}

.btn:active{
  transform:translateY(0);
}

.divider{
  text-align:center;margin:24px 0;
  color:var(--text-muted);font-size:13px;
  position:relative;
}

.divider::before,
.divider::after{
  content:'';position:absolute;top:50%;
  width:40%;height:1px;
  background:var(--border);
}

.divider::before{left:0}
.divider::after{right:0}

.login-link{
  text-align:center;margin-top:24px;
  font-size:14px;color:var(--text-muted);
}

.login-link a{
  color:var(--primary);
  text-decoration:none;
  font-weight:600;
  transition:.3s;
}

.login-link a:hover{
  color:var(--primary-light);
  text-decoration:underline;
}

.error-msg{
  color:var(--error);
  font-size:13px;
  margin-top:12px;
  padding:12px;
  background:rgba(239,68,68,.1);
  border:1px solid rgba(239,68,68,.3);
  border-radius:8px;
  display:none;
}

.success-msg{
  color:var(--success);
  font-size:13px;
  margin-top:12px;
  padding:12px;
  background:rgba(16,185,129,.1);
  border:1px solid rgba(16,185,129,.3);
  border-radius:8px;
  display:none;
}

/* Loading animation */
.loading{
  display:none;
  position:absolute;
  inset:0;
  background:rgba(10,14,26,.95);
  border-radius:12px;
  align-items:center;
  justify-content:center;
  z-index:100;
}

.loading.show{display:flex}

.spinner{
  width:40px;height:40px;
  border:4px solid rgba(212,175,55,.2);
  border-top-color:var(--primary);
  border-radius:50%;
  animation:spin 0.8s linear infinite;
}

@keyframes spin{
  to{transform:rotate(360deg)}
}
</style>
</head>
<body>

<!-- Animated Background -->
<div class="bg-animation">
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="flash"></div>
  <!-- Glowing lines -->
  <div class="glow-line" style="top:20%;animation-delay:0s"></div>
  <div class="glow-line" style="top:50%;animation-delay:1.5s"></div>
  <div class="glow-line" style="top:80%;animation-delay:3s"></div>
</div>

<!-- Register Form -->
<div class="register-container">
  <div class="loading" id="loading">
    <div class="spinner"></div>
  </div>
  
  <div class="logo-section">
    <img src="logo.jpg" alt="DRRMS Logo" style="width:100px;height:auto;margin-bottom:20px;border-radius:20px;"/>
<h1 class="logo-text">DRRMS</h1>
    <p class="subtitle">Disaster Relief Resource Management System</p>
    <span class="alert-badge">üö® Emergency New User Registration</span>
  </div>

  <form id="registerForm" onsubmit="handleRegister(event)">
    <div class="form-group">
      <div class="input-wrapper">
        <input type="text" id="fullName" placeholder="Full Name" required/>
        <span class="input-icon">üë§</span>
      </div>
    </div>

    <div class="form-group">
      <div class="input-wrapper">
        <input type="email" id="email" placeholder="Email Address" required/>
        <span class="input-icon">üìß</span>
      </div>
    </div>

    <div class="form-group">
      <div class="input-wrapper">
        <input type="tel" id="phone" placeholder="Phone Number" required/>
        <span class="input-icon">üì±</span>
      </div>
    </div>

    <div class="form-group">
      <div class="input-wrapper">
        <input type="password" id="password" placeholder="Create Password" required/>
        <span class="input-icon">üîí</span>
      </div>
    </div>

    <div class="error-msg" id="errorMsg"></div>
    <div class="success-msg" id="successMsg"></div>

    <button type="submit" class="btn">Create Account</button>
  </form>

  <div class="divider">OR</div>

  <div class="login-link">
    Already have an account? <a href="login.html">üîê Back to Login</a>
  </div>
</div>

<script>
// Create floating particles
const bgAnimation = document.querySelector('.bg-animation');
for(let i = 0; i < 30; i++){
  const particle = document.createElement('div');
  particle.className = 'particle';
  particle.style.left = Math.random() * 100 + '%';
  particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
  particle.style.animationDelay = Math.random() * 5 + 's';
  bgAnimation.appendChild(particle);
}

const API = '/drrms/api/index.php';

async function handleRegister(e){
  e.preventDefault();
  
  const name = document.getElementById('fullName').value.trim();
  const email = document.getElementById('email').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const password = document.getElementById('password').value;
  
  // Validation
  if(!name || !email || !phone || !password){
    showError('All fields are required');
    return;
  }
  
  if(password.length < 6){
    showError('Password must be at least 6 characters');
    return;
  }
  
  // Show loading
  document.getElementById('loading').classList.add('show');
  hideMessages();
  
  try{
    const response = await fetch(API + '/auth/register', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
        name: name,
        email: email,
        phone: phone,
        password: password
      })
    });
    
    const data = await response.json();
    
    if(response.ok && data.success){
      showSuccess('‚úÖ Account created successfully! Redirecting to login...');
      setTimeout(() => {
        window.location.href = 'login.html';
      }, 2000);
    } else {
      showError(data.error || 'Registration failed. Please try again.');
    }
  } catch(error){
    showError('‚ùå Network error. Please check your connection.');
  } finally {
    document.getElementById('loading').classList.remove('show');
  }
}

function showError(msg){
  const errorEl = document.getElementById('errorMsg');
  errorEl.textContent = msg;
  errorEl.style.display = 'block';
  setTimeout(() => errorEl.style.display = 'none', 5000);
}

function showSuccess(msg){
  const successEl = document.getElementById('successMsg');
  successEl.textContent = msg;
  successEl.style.display = 'block';
}

function hideMessages(){
  document.getElementById('errorMsg').style.display = 'none';
  document.getElementById('successMsg').style.display = 'none';
}

// Add input animation effects
document.querySelectorAll('input').forEach(input => {
  input.addEventListener('focus', function(){
    this.parentElement.style.transform = 'scale(1.02)';
    this.parentElement.style.transition = '.3s';
  });
  
  input.addEventListener('blur', function(){
    this.parentElement.style.transform = 'scale(1)';
  });
});
</script>
</body>
</html>
